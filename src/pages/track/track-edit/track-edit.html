<ion-header>
    <ion-navbar>
        <ion-title>track-edit</ion-title>
    </ion-navbar>
</ion-header>
<ion-content padding>
    <form [formGroup]="trackEditForm" >
        <ion-input type="hidden" formControlName="trackId"></ion-input>
        <ion-input type="hidden" formControlName="themeId"></ion-input>
        <ion-item>
            <ion-label>内容</ion-label>
            <ion-textarea formControlName="content"></ion-textarea>
        </ion-item>
        <ion-item>
            <ion-label>日期</ion-label>
            <ion-datetime displayFormat="YYYY-MM-DD" pickerFormat="YYYY-MM-DD" formControlName="trackDate"></ion-datetime>
        </ion-item>
        <ion-item>
            <ion-label>时间</ion-label>
            <ion-datetime displayFormat="HH:mm" pickerFormat="HH:mm" formControlName="trackDateTime"></ion-datetime>
        </ion-item>
        <div id="preDiv">
            <ul style="padding: 0;" >
                    <!-- 采用angular循环的方式，对存入thumb的图片进行展示 -->
                <li style="list-style-type: none;display: inline-block;width: 23%;height: 90px;" *ngFor="let item of selectedImgUrl">
                    <p style="position: fixed;padding: 0;margin: 0px 0px 6px 20px;display: block;text-align: center;background-color: red;" (click)="removeImg(item)" >
                        删除图片
                    </p>
                    <img _ngcontent-c1="" class="addpic" src="{{item.mini_img_url}}" style="width: 100%;">
                </li>
                <li style="list-style-type: none;display: inline-block;width: 23%;height: 90px;">
                    <input type="file" accept="images/*" ng2FileSelect [uploader]="uploader" (change)="selectedFileOnChanged($event)" class="file_upload" multiple="multiple" />
                    <img src="assets/imgs/addpic.png" class="addpic" id="preview1" />
                </li>
            </ul>
        </div>
        <!--<input type="file" id="track_img" #track_img (change)="uploadTest(track_img)" name="file" id="file">-->
        <!--<input type="file" ng2FileSelect [uploader]="uploader" (change)="selectedFileOnChanged($event)">-->
        <!--<button ion-button full (click)="uploadTrackImg()">上传</button>-->
        <button ion-button full (click)="saveTrackInfo(trackEditForm.value, $event)" [disabled]="!trackEditForm.valid">Dark</button>
    </form>
</ion-content>
<style>
    .file_upload {
        position: absolute;
        width: 22%;
        height: 90px;
        margin-left: 2px;
        opacity: 0;
    }
    .addpic {
        height: 90px;
        margin-left: 2px;
    }

</style>